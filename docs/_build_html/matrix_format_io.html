

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Matrix Formats and Input/Output &mdash; Clustergrammer 1.1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="https://unpkg.com/font-awesome@4.5.0/css/font-awesome.min.css" type="text/css" />
  

  
    <link rel="top" title="Clustergrammer 1.1.0 documentation" href="index.html"/>
        <link rel="next" title="Web-Development with Clustergrammer" href="building_webpage.html"/>
        <link rel="prev" title="Case Studies and Examples" href="case_studies.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Clustergrammer
          

          
          </a>

          
            
            
              <div class="version">
                1.1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="clustergrammer_web.html">Clustergrammer Web App</a></li>
<li class="toctree-l1"><a class="reference internal" href="clustergrammer_widget.html">Clustergrammer Jupyter Widget</a></li>
<li class="toctree-l1"><a class="reference internal" href="interacting_with_viz.html">Interacting with the Visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="biology_specific_features.html">Biology-Specific Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="case_studies.html">Case Studies and Examples</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Matrix Formats and Input/Output</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#simple-matrix-format">Simple Matrix Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="#simple-category-matrix-format">Simple-Category Matrix Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tuple-category-matrix-format">Tuple-Category Matrix Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="#category-types-string-and-value">Category Types: String and Value</a></li>
<li class="toctree-l2"><a class="reference internal" href="#matrix-file-examples">Matrix File Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="#matrix-input-output-to-clustergrammer-py">Matrix Input/Output to Clustergrammer.py</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="building_webpage.html">Web-Development with Clustergrammer</a></li>
<li class="toctree-l1"><a class="reference internal" href="clustergrammer_js.html">Clustergrammer-JS</a></li>
<li class="toctree-l1"><a class="reference internal" href="clustergrammer_py.html">Clustergrammer-PY</a></li>
<li class="toctree-l1"><a class="reference internal" href="app_integration.html">App Integration Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="developing_with_clustergrammer.html">Developing Clustergrammer</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Clustergrammer</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Matrix Formats and Input/Output</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/matrix_format_io.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="matrix-formats-and-input-output">
<span id="matrix-format-io"></span><h1>Matrix Formats and Input/Output<a class="headerlink" href="#matrix-formats-and-input-output" title="Permalink to this headline">¶</a></h1>
<p>Clustergrammer takes as input either:</p>
<ul class="simple">
<li>a tab-separated matrix file</li>
<li>a Pandas DataFrame (using <a class="reference internal" href="clustergrammer_py.html#clustergrammer-py"><span class="std std-ref">Clustergrammer-PY</span></a>)</li>
</ul>
<p>The tab-separated matrix file can take several formats shown below, which can include row/column categories and name/category titles. In all cases, row and column names must be unique. Users are encouraged to arrange their matrix with data-points as columns and dimensions as rows, which enables users to take advantage of Clustergrammer&#8217;s <a class="reference internal" href="interacting_with_viz.html#interactive-dim-reduction"><span class="std std-ref">Interactive Dimensionality Reduction</span></a>.</p>
<p>The front-end <a class="reference internal" href="clustergrammer_js.html#clustergrammer-js"><span class="std std-ref">Clustergrammer-JS</span></a> library can visualize matrices up to ~500,000 to ~1,000,000 cells in size and is also optimized to visualize matrices with more rows than columns &#8211; this has been done to accommodate datasets with many dimensions (rows) and few measurements (columns) that are common in biology. However very large matrices may take a long time to cluster using the <a class="reference internal" href="clustergrammer_py.html#clustergrammer-py"><span class="std std-ref">Clustergrammer-PY</span></a> library.</p>
<div class="section" id="simple-matrix-format">
<h2>Simple Matrix Format<a class="headerlink" href="#simple-matrix-format" title="Permalink to this headline">¶</a></h2>
<p>The simplest tab-separated file format is shown here:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>      <span class="n">Col</span><span class="o">-</span><span class="n">A</span>   <span class="n">Col</span><span class="o">-</span><span class="n">B</span>   <span class="n">Col</span><span class="o">-</span><span class="n">C</span>
<span class="n">Row</span><span class="o">-</span><span class="n">A</span> <span class="mf">0.0</span>     <span class="o">-</span><span class="mf">0.1</span>    <span class="mf">1.0</span>
<span class="n">Row</span><span class="o">-</span><span class="n">B</span> <span class="mf">3.0</span>     <span class="mf">0.0</span>     <span class="mf">8.0</span>
<span class="n">Row</span><span class="o">-</span><span class="n">C</span> <span class="mf">0.2</span>     <span class="mf">0.1</span>     <span class="mf">2.5</span>
</pre></div>
</div>
<p>The first row gives the column names and starts with a blank tab. All other rows start with the row name followed by the row data. Row and column titles can be added by prefixing each row or column name with <code class="docutils literal"><span class="pre">'Title:</span> <span class="pre">'</span></code> (not shown in this example). See <a class="reference external" href="https://github.com/MaayanLab/clustergrammer/blob/master/txt/example_tsv.txt">example_tsv.txt</a> for an example of this matrix format.</p>
</div>
<div class="section" id="simple-category-matrix-format">
<h2>Simple-Category Matrix Format<a class="headerlink" href="#simple-category-matrix-format" title="Permalink to this headline">¶</a></h2>
<p>Row and column categories can be included in two ways. The first, simple-category format, is shown below:</p>
<div class="figure align-left" id="id1">
<a class="reference internal image-reference" href="_images/cat_tsv.png"><img alt="Simple Matrix-Category Format" src="_images/cat_tsv.png" style="width: 700px;" /></a>
<p class="caption"><span class="caption-text">A matrix with row and column categories in &#8216;simple&#8217; format.</span></p>
</div>
<p>This simple-category format allows users to encode column categories as extra rows underneath column labels and row categories as an extra columns next to row labels. The above screenshot of an Excel spreadsheet shows a single row category being added as an additional column of strings (e.g. <code class="docutils literal"><span class="pre">Type:</span> <span class="pre">Interesting</span></code>) and a single column category being added as an additional row of strings (e.g. <code class="docutils literal"><span class="pre">Gender:</span> <span class="pre">Male</span></code>). Up to 15 categories can be added in a similar manner. Titles for row or column names or categories can be added by prefixing each string with <code class="docutils literal"><span class="pre">'Title:</span> <span class="pre">'</span></code> (note the space after the colon). For example, the title of the column names is <code class="docutils literal"><span class="pre">Cell</span> <span class="pre">Line</span></code> and the title of the row categories is <code class="docutils literal"><span class="pre">Gender</span></code>. See <a class="reference external" href="https://github.com/MaayanLab/clustergrammer/blob/master/txt/rc_two_cats.txt">rc_two_cats.txt</a> for an example of this matrix format. Titles, if given, will be shown as labels above row/column names or adjacent to row/column categories.</p>
</div>
<div class="section" id="tuple-category-matrix-format">
<h2>Tuple-Category Matrix Format<a class="headerlink" href="#tuple-category-matrix-format" title="Permalink to this headline">¶</a></h2>
<p>Row/column names and categories can also be encoded as Python <a class="reference external" href="https://docs.python.org/3/tutorial/datastructures.html">tuples</a> as shown below:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>        <span class="p">(</span><span class="s1">&#39;Cell Line: A549&#39;</span><span class="p">,</span> <span class="s1">&#39;Gender: Male&#39;</span><span class="p">)</span>     <span class="p">(</span><span class="s1">&#39;Cell Line: H1299&#39;</span><span class="p">,</span> <span class="s1">&#39;Gender: Female&#39;</span><span class="p">)</span>  <span class="p">(</span><span class="s1">&#39;Cell Line: H661&#39;</span><span class="p">,</span> <span class="s1">&#39;Gender: Female&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="s1">&#39;Gene: EGFR&#39;</span><span class="p">,</span><span class="s1">&#39;Type: Interesting&#39;</span><span class="p">)</span>      <span class="o">-</span><span class="mf">3.234</span>  <span class="mf">5.03</span>    <span class="mf">0.001</span>
<span class="p">(</span><span class="s1">&#39;Gene: TP53&#39;</span><span class="p">,</span><span class="s1">&#39;Type: Not Interesting&#39;</span><span class="p">)</span>  <span class="mf">8.3</span>     <span class="mf">4.098</span>   <span class="o">-</span><span class="mf">12.2</span>
<span class="p">(</span><span class="s1">&#39;Gene: IRAK&#39;</span><span class="p">,</span><span class="s1">&#39;Type: Not Interesting&#39;</span><span class="p">)</span>  <span class="mf">7.23</span>    <span class="mf">3.01</span>    <span class="mf">0.88</span>
</pre></div>
</div>
<p>This tuple-category format is easier to work with in Python and can be imported/exported into Pandas DataFrames and as tab-separated files. Note that titles have been added to row/column names and categories as discussed above. See <a class="reference external" href="https://github.com/MaayanLab/clustergrammer/blob/master/txt/tuple_cats.txt">tuple_cats.txt</a> for an example of this matrix format.</p>
</div>
<div class="section" id="category-types-string-and-value">
<h2>Category Types: String and Value<a class="headerlink" href="#category-types-string-and-value" title="Permalink to this headline">¶</a></h2>
<p>Row and column categories can be of type: <em>string</em> or <em>value</em>. If categories are given as strings (e.g. containing letters), then categories will be depicted using colors. If categories are of type value (e.g. all categories contain only numbers), then value-categories will be depicted using color and opacity (gray for positive and orange for negative).</p>
<p><em>Value</em>-based categories can be useful for adding data to your visualization (e.g. drug-dosage value) that you would like to compare to your other dimensions, but that should not influence your clustering. Both <em>value</em> and <em>string</em> categories can also be used to reorder your matrix by double-clicking their labels (see <a class="reference internal" href="interacting_with_viz.html#interactive-categories"><span class="std std-ref">Interactive Categories</span></a>).</p>
</div>
<div class="section" id="matrix-file-examples">
<h2>Matrix File Examples<a class="headerlink" href="#matrix-file-examples" title="Permalink to this headline">¶</a></h2>
<p>Several example tab-separated matrix files can be found in <a class="reference external" href="https://github.com/MaayanLab/clustergrammer/tree/master/txt">example matrix files</a>.</p>
</div>
<div class="section" id="matrix-input-output-to-clustergrammer-py">
<h2>Matrix Input/Output to Clustergrammer.py<a class="headerlink" href="#matrix-input-output-to-clustergrammer-py" title="Permalink to this headline">¶</a></h2>
<p>Clustergrammer.py can load a matrix directly from a file or from a Pandas DataFrame as well as export to a file or Pandas DataFrame:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># initialize Network object</span>
<span class="kn">from</span> <span class="nn">clustergrammer</span> <span class="k">import</span> <span class="n">Network</span>
<span class="n">net</span> <span class="o">=</span> <span class="n">Network</span><span class="p">()</span>

<span class="c1"># load matrix from file or DataFrame</span>
<span class="c1">####################################</span>

<span class="c1"># load data from file</span>
<span class="n">net</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="s1">&#39;your_matrix.txt&#39;</span><span class="p">)</span>

<span class="c1"># load data from DataFrame, df</span>
<span class="n">net</span><span class="o">.</span><span class="n">load_df</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="c1"># export matrix</span>
<span class="c1">###############</span>

<span class="c1"># write matrix to tab separated file</span>
<span class="n">net</span><span class="o">.</span><span class="n">write_matrix_to_tsv</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>

<span class="c1"># export data to Pandas DataFrame</span>
<span class="n">df_export</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">export_df</span><span class="p">()</span>
</pre></div>
</div>
<p>For more information about Clustergrammer.py and its API, refer to the <a class="reference internal" href="clustergrammer_py.html#clustergrammer-py"><span class="std std-ref">Clustergrammer-PY</span></a> section.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="building_webpage.html" class="btn btn-neutral float-right" title="Web-Development with Clustergrammer" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="case_studies.html" class="btn btn-neutral" title="Case Studies and Examples" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Nicolas F. Fernandez.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://unpkg.com/jupyter-js-widgets@^2.0.13/dist/embed.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>